// Global Layout Settings

@use 'layer-styles';
@use 'breakpoints';

body {
  display: grid;

  // 12 column layout translated into named columns
  // |------------| page / breakout
  // ...|------|... main
  // ...|---|...... left-column
  // ......|---|... right column
  // ...|--|....... left-one-third
  // .......|--|... right-one-third

  grid-template-columns:
    [page-start breakout-start] 2fr
    [oversized-start left-oversized-start] 1fr
    [main-start left-column-start left-two-thirds-start left-one-third-start] 2fr
    [left-one-third-end left-oversized-end right-two-thirds-start] 1fr [left-column-end right-column-start]
    1fr [left-two-thirds-end right-one-third-start right-oversized-start]
    2fr [main-end right-two-thirds-end right-one-third-end right-column-end]
    1fr [oversized-end right-oversized-end]
    2fr [page-end breakout-end];

  @media (max-width: #{breakpoints.$desktop}) {
    grid-template-columns:
    [page-start breakout-start] 2fr
    [oversized-start left-oversized-start main-start left-column-start left-two-thirds-start left-one-third-start] 3fr
    [left-one-third-end left-oversized-end right-two-thirds-start]
    1fr
    [left-column-end right-column-start]
    1fr [left-two-thirds-end right-one-third-start right-oversized-start]
    3fr [main-end right-two-thirds-end right-one-third-end right-column-end oversized-end right-oversized-end]
    2fr [page-end breakout-end];
  }

  @media (max-width: #{breakpoints.$desktop-S}) {
    grid-template-columns:
    [page-start breakout-start oversized-start left-oversized-start main-start left-column-start left-two-thirds-start left-one-third-start] 5fr
    [left-one-third-end left-oversized-end right-two-thirds-start]
    1fr
    [left-column-end right-column-start]
    1fr [left-two-thirds-end right-one-third-start right-oversized-start]
    5fr [main-end right-two-thirds-end right-one-third-end right-column-end oversized-end right-oversized-end page-end breakout-end];
  }

  @media (max-width: #{breakpoints.$tablet}) {
    grid-template-columns:
    [page-start breakout-start oversized-start left-oversized-start main-start left-column-start left-two-thirds-start left-one-third-start right-two-thirds-start right-column-start right-one-third-start right-oversized-start]
    1fr
    [left-one-third-end left-oversized-end left-column-end left-two-thirds-end main-end right-two-thirds-end right-one-third-end right-column-end oversized-end right-oversized-end page-end breakout-end];
  }

  gap: var(--grid-gap) var(--grid-gap);
}

main {
  grid-column: page;
  display: grid;
  grid-template-columns: subgrid;
  gap: var(--grid-gap) var(--grid-gap);
}

section {
  grid-column: page;
  display: grid;
  grid-template-columns: subgrid;
  column-gap: var(--grid-gap);
  row-gap: 0;
}

.main, .page-opener {
  grid-column: main;
}

.breakout, .hero {
  grid-column: breakout;
}

.floating-illustration {
  background-color: var(--color-visual-grouping);
  padding: var(--grid-gap);
  box-sizing: border-box;
  text-align: center;

  &.main {
    display: grid;
    grid-template-columns: subgrid;

    img {
      grid-column: main;
    }
  }
}


.layout {
  display: grid;
  grid-template-columns: subgrid;
  grid-template-rows: [left-content-start right-content-start] auto [left-content-end right-content-end];

  @media (max-width: #{breakpoints.$tablet}) {
    grid-template-rows: [left-content-start] auto [left-content-end right-content-start] auto [right-content-end];
    row-gap: var(--spacer-line-break);
  }
}

@media (max-width: #{breakpoints.$tablet}) {
  .order-override-first {
    grid-row: left-content;
  }

  .order-override-second {
    grid-row: right-content;
  }
}

.two-columns {
  .column {
    &:first-child {
      grid-row: left-content;
      grid-column: left-column;
    }
    &:last-child {
      grid-row: right-content;
      grid-column: right-column;
    }
  }
}

.left-two-thirds {
  grid-column: left-two-thirds;
  grid-row: left-content;
}

.right-two-thirds {
  grid-column: right-two-thirds;
  grid-row: right-content;
}

.right-one-third {
  grid-column: right-one-third;
  grid-row: right-content;
}

.left-oversized {
  grid-column: left-oversized;
  grid-row: left-content;
}

.right-oversized {
  grid-column: right-oversized;
  grid-row: right-content;
}

.oversized {
  grid-column: oversized;
  grid-row: left-content;
}

.ceil {
  height: fit-content;
  align-self: start;
}

.vertical-middle {
  height: fit-content;
  align-self: center;
}

.floor {
  height: fit-content;
  align-self: end;
}

// -- Media Elements
img, figure, video {
  border-radius: var(--border-radius-default);
  margin: var(--spacer-line-break) 0 var(--spacer-line-break) 0;
  &:first-child {
    margin-top: 0;
  }
  &:last-child {
    margin-bottom: 0;
  }
  box-sizing: border-box;

  * {
    max-width: 100%;
  }
}

img, figure, video, audio {
  margin: 0;
  padding: 0;
}

img, video, audio {
  width: 100%;
  height: auto;
  max-height: 80vh;
  max-height: 80svh;
  object-fit: contain;
}

// -- Specialized Elements
.visually-grouped-block {
  @include layer-styles.resize-handles;

  height: fit-content;
  &.floor {
    align-self: end;
  }

  padding: var(--spacer-line-break);

  figure {
    margin:
      calc(-1 * var(--spacer-line-break))
      calc(-1 * var(--spacer-line-break))
      var(--spacer-line-break)
      calc(-1 * var(--spacer-line-break));
  }
  figure:first-child {
    &, & img {
      border-radius: 0;
    }
  }
}

.visually-grouped-list {
  border-left: solid 2px var(--color-accent, #f0f);
  &.aside {
    border-color: var(--text-color-dimmed);
    h1, h2, h3, h4, h5, h6 {
      background: unset;
      -webkit-background-clip: unset;
      -webkit-text-fill-color: unset;
      color: var(--text-color-dimmed);
    }
  }
  padding-left: 1.5rem;
  margin: var(--spacer-element) 0 var(--spacer-line-break, 500px) 0;
  &:first-child {
    margin-top: 0;
  }
}

footer {
  grid-column: page;
}
